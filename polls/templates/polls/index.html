<!DOCTYPE html>
{% load static %}

<html lang="en">
<head>
  <!-- basic -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- mobile metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1">
  <!-- site metas -->
  <title>GuessMyMovie</title>
  <meta name="keywords" content="">
  <meta name="description" content="">
  <meta name="author" content="">
  <!-- fevicon -->
  <link rel="icon" href="{% static 'images/fevicon.png' %}" type="image/gif" />
  <!-- bootstrap css -->
  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
  <!-- style css -->
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <!-- Responsive-->
  <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
  <!-- Scrollbar Custom CSS -->
  <link rel="stylesheet" href="{% static 'css/jquery.mCustomScrollbar.min.css' %}">
  <!-- Tweaks for older IEs-->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>
<!-- body -->

<body class="main-layout">
  <!-- loader  -->
  <div class="loader_bg">
    <div class="loader"><img src="{% static 'images/loading.gif' %}" alt="#" /></div>
  </div>
  <!-- end loader -->
  <!-- header -->
  <header>
    <!-- header inner -->
    <div class="header-top">
      <div class="header">
        <div class="container">
          <div class="row">
            <div class="col-xl-2 col-lg-2 col-md-2 col-sm-3 col logo_section">
              <div class="full">
                <div class="center-desk">
                  <div class="logo">
                    <a href="/polls"><img src="{% static 'images/logo.png' %}" alt="#" /></a>
                  </div>
                </div>
              </div>
            </div>
         </div>
       </div>
     </div>
     <!-- end header inner -->

     <!-- end header -->
     <section class="slider_section">
      <div id="myCarousel" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
          <li data-target="#myCarousel" data-slide-to="1"></li>
          <li data-target="#myCarousel" data-slide-to="2"></li>
        </ol>
          <div class="carousel-inner">
          <div class="carousel-item active">

            <div id="container" style="display: flex;">
              <div id="div_form" class="carousel-caption" style="width: 100%;">
                <div class="row">
                  <div class="col-md-12">
                    <div class="text-bg">
                      <h1>GUESS MY MOVIE</h1>
                      <p style="font-size: 24px;">To search for a movie enter a description of it</p>
                        <label for="movie_genre" style="font-size: 18px;">Select a genre</label>
                        <div style="width: 100%; display: flex; align-content: center; margin-bottom: 10px;">
                            <select name="movie_genre" id="movie_genre" style="font-size: 18px; margin-right: auto; margin-left: auto;">
                              <option value="Action">/!\ Action</option>
                              <option value="Adventure">Adventure</option>
                              <option value="Animation">Animation</option>
                              <option value="Comedy">/!\ Comedy /!\</option>
                              <option value="Crime">/!\ Crime</option>
                              <option value="Documentary">Documentary</option>
                              <option value="Drama">/!\ Drama /!\</option>
                              <option value="Family">Family</option>
                              <option value="Fantasy">Fantasy</option>
                              <option value="History">History</option>
                              <option value="Horror">Horror</option>
                              <option value="Music">Music</option>
                              <option value="Mystery">Mystery</option>
                              <option value="Romance">/!\ Romance</option>
                              <option value="Science_Fiction">Science Fiction</option>
                              <option value="TV_Movie">TV Movie</option>
                              <option value="Thriller">/!\ Thriller</option>
                              <option value="War">War</option>
                              <option value="Western">Western</option>
                            </select>
                        </div>
                        <textarea id="user_desc" name="user_desc" rows="6" style="width: 80%;"></textarea><br>
                        <input id="button_submit" type="submit" value="Guess It !" style="width: 200px; height: 100px; font-size: 24px" onclick="search_movie();">
                        <div id="loading_movie" style="display: none; align-content: center;">
                          <img style="margin-left: auto; margin-right: auto; max-width: 200px;" src="{% static 'images/movie_loading.gif' %}" alt="#" />
                        </div>
                    </div>
                  </div>
                </div>
              </div>
                <div id="div_image" style="width: 50%; display: none;">
                    <div style="display: flex; align-content: center;">
                        <div style="display: flex; margin-left: auto; margin-right: auto; align-content: center; text-align: center;">
                            <a id="main_link" href="https://www.themoviedb.org/tv/13916" target="_blank">
                                <figure style="width:250px;">
                                    <figcaption id="main_accuracy" style="color: white; font-size: 20px;">Score : xx,xx</figcaption>
                                    <img id="main_image" src="https://critics.io/img/movies/poster-placeholder.png" alt="Death Note">
                                    <figcaption id="main_title" style="color: white; font-size: 20px;">Placeholder</figcaption>
                                </figure>
                            </a>
                        </div>
                    </div>
                    <div style="display: flex; align-content: center; margin-top: 15px;">
                        <div style="display: flex; margin-left: auto; margin-right: auto; align-content: center; text-align: center;">
                            <a id="second_link" href="https://www.themoviedb.org/tv/13916" target="_blank">
                                <figure style="width:125px;">
                                    <figcaption id="second_accuracy" style="color: white; font-size: 20px;">Score : xx,xx</figcaption>
                                    <img id="second_image" src="https://critics.io/img/movies/poster-placeholder.png" alt="Death Note">
                                    <figcaption id="second_title" style="color: white; font-size: 16px;">Placeholder</figcaption>
                                </figure>
                            </a>
                            <a id="third_link" href="https://www.themoviedb.org/tv/13916" target="_blank">
                                <figure style="width:125px;">
                                    <figcaption id="third_accuracy" style="color: white; font-size: 20px;">Score : xx,xx</figcaption>
                                    <img id="third_image" src="https://critics.io/img/movies/poster-placeholder.png" alt="Death Note">
                                    <figcaption id="third_title" style="color: white; font-size: 16px;">Placeholder</figcaption>
                                </figure>
                            </a>
                            <a id="fourth_link" href="https://www.themoviedb.org/tv/13916" target="_blank">
                                <figure style="width:125px;">
                                    <figcaption id="fourth_accuracy" style="color: white; font-size: 20px;">Score : xx,xx</figcaption>
                                    <img id="fourth_image" src="https://critics.io/img/movies/poster-placeholder.png" alt="Death Note">
                                    <figcaption id="fourth_title" style="color: white; font-size: 16px;">Placeholder</figcaption>
                                </figure>
                            </a>
                            <a id="fifth_link" href="https://www.themoviedb.org/tv/13916" target="_blank">
                                <figure style="width:125px;">
                                    <figcaption id="fifth_accuracy" style="color: white; font-size: 20px;">Score : xx,xx</figcaption>
                                    <img id="fifth_image" src="https://critics.io/img/movies/poster-placeholder.png" alt="Death Note">
                                    <figcaption id="fifth_title" style="color: white; font-size: 16px;">Placeholder</figcaption>
                                </figure>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
          </div>
        </div>
   </div>
    
  

</section>
</div>
</header>

<!-- end Gallery -->

          <!-- Javascript files-->
          <script src="{% static 'js/jquery.min.js' %}"></script>
          <script src="{% static 'js/popper.min.js' %}"></script>
          <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
          <script src="{% static 'js/jquery-3.0.0.min.js' %}"></script>
          <script src="{% static 'js/plugin.js' %}"></script>
          <!-- sidebar -->
          <script src="{% static 'js/jquery.mCustomScrollbar.concat.min.js' %}"></script>
          <script src="{% static 'js/custom.js' %}"></script>
          <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>

<script type="application/javascript">
    function search_movie(){
        if($("#movie_genre").val() === "" || $("#user_desc").val() === ""){
            return;
        }
        $("#button_submit").css("display", "none");
        $("#loading_movie").css("display", "block");
        var wm = $.ajax({
            url: 'find_movie',
            type: 'POST',
            data: {
                csrfmiddlewaretoken: "{{ csrf_token }}",
                desc: $("#user_desc").val(),
                genre: $("#movie_genre").val()
            },
            dataType: 'json',
            success: function (data) {
                $("#loading_movie").css("display", "none");
                $("#button_submit").css("display", "");

                $("#main_title").text(data[0]['Title']);
                $("#second_title").text(data[1]['Title']);
                $("#third_title").text(data[2]['Title']);
                $("#fourth_title").text(data[3]['Title']);
                $("#fifth_title").text(data[4]['Title']);

                $("#main_accuracy").text("Score: " + parseFloat(data[0]['match']).toFixed(2));
                $("#second_accuracy").text("Score: " + parseFloat(data[1]['match']).toFixed(2));
                $("#third_accuracy").text("Score: " + parseFloat(data[2]['match']).toFixed(2));
                $("#fourth_accuracy").text("Score: " + parseFloat(data[3]['match']).toFixed(2));
                $("#fifth_accuracy").text("Score: " + parseFloat(data[4]['match']).toFixed(2));

                $("#main_link").attr("href", "https://www.themoviedb.org/movie/" + data[0]['tmdb_id']);
                $("#second_link").attr("href", "https://www.themoviedb.org/movie/" + data[1]['tmdb_id']);
                $("#third_link").attr("href", "https://www.themoviedb.org/movie/" + data[2]['tmdb_id']);
                $("#fourth_link").attr("href", "https://www.themoviedb.org/movie/" + data[3]['tmdb_id']);
                $("#fifth_link").attr("href", "https://www.themoviedb.org/movie/" + data[4]['tmdb_id']);

                $("#main_image").attr("src", "http://image.tmdb.org/t/p/original" + data[0]['poster_path']);
                $("#second_image").attr("src", "http://image.tmdb.org/t/p/original" + data[1]['poster_path']);
                $("#third_image").attr("src", "http://image.tmdb.org/t/p/original" + data[2]['poster_path']);
                $("#fourth_image").attr("src", "http://image.tmdb.org/t/p/original" + data[3]['poster_path']);
                $("#fifth_image").attr("src", "http://image.tmdb.org/t/p/original" + data[4]['poster_path']);

                $("#div_image").css("display", "block");
                $("#div_form").css("width", "50%");
            }
        });
    }
</script>
</body>

</html>